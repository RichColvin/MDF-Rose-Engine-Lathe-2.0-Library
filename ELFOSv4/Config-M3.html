<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>

<head bgcolor=#E6E6E6>
<title>ELFOS</title>
<link rel="shortcut icon" type="image/ico" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="Images/favicon.png">

<body style="background-color: #E6E6E6; font: 16px Arial; ">

<!-- ################################################### -->
<!-- Code for Including Standard HTML files on the 	 -->
<!-- server					         -->
<!-- ################################################### -->
<script src="library.js"></script>

<script>
function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /* Loop through a collection of all HTML elements: */
  z = document.getElementsByTagName("*");
  for (i = 0; i < z.length; i++) {
    elmnt = z[i];
    /*search for elements with a certain atrribute:*/
    file = elmnt.getAttribute("w3-include-html");
    if (file) {
      /* Make an HTTP request using the attribute value as the file name: */
      xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
          if (this.status == 200) {elmnt.innerHTML = this.responseText;}
          if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
          /* Remove the attribute, and call this function once more: */
          elmnt.removeAttribute("w3-include-html");
          includeHTML();
        }
      }
      xhttp.open("GET", file, true);
      xhttp.send();
      /* Exit the function: */
      return;
    }
  }
}
</script> 

<!-- ################################################### -->
<!-- Site Standards Include File        		  		 -->
<div w3-include-html="include-SiteStandards.html"></div> 
<script>
includeHTML();
</script>

<!-- ################################################### -->
<!-- Calculate Distance/360 -->
<script>
    function calcValues()    {

	    var fmmInch = 0.0393701;
	   	var x = document.getElementById("frm1");

	// ###################################################
	// Get the Headstock Lever Arm Length
	//
		fMetricPitch = Number(x.elements[0].value);
			
	// ###################################################
	// Get the AA lever Arm Length
	//
		iLSStarts = Number(x.elements[1].value);

	// ###################################################
	// Calculate the Values
	//

        var fImpDist360 = fMetricPitch * iLSStarts * fmmInch;
    	document.getElementById("ImpDist360").innerHTML = fImpDist360.toFixed(5);
    		
        fMetricDist360 = fMetricPitch * iLSStarts;
    	document.getElementById("MetricDist360").innerHTML = fMetricDist360.toFixed(1);

        var fImpPitch = fMetricPitch * fmmInch;
    	document.getElementById("ImpPitch").innerHTML = fImpPitch.toFixed(5);

        var fScrewTPI = 1 / fImpPitch;
    	document.getElementById("ScrewTPI").innerHTML = fScrewTPI.toFixed(1);
		}
</script>

<!-- ################################################### -->
<!-- Style Sheet for MathJax                             -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

</head>

<!-- ################################################### -->
<!-- Body - Right Side of the Screen                     -->
<!-- ################################################### -->

<body bgcolor=#E6E6E6 background="Images/DevBackground.png">

<div style="float: right;
        margin-top: 0px; margin-bottom: 5px;
        margin-left: 10px; margin-right: 0px; 
        padding-top: 0px; padding-bottom: 0px;
        padding-left: 0px; padding-right: 0px; 
        border: 0px solid black; 
        text-align: left;  
        background-color:#E6E6E6; 
        " >
    <img src="Images/Screens/Pref_M3.jpg" width="450px" class="Image" alt="HTML Map" border="0" usemap="#html">
    <map name = "html">
        <area shape = "rect" coords = "002,002,075,033" href = "Config-Spindle.html" />
        <area shape = "rect" coords = "002,038,075,069" href = "Config-ZAxis.html" />
        <area shape = "rect" coords = "002,075,075,107" href = "Config-XAxis.html" />
        <area shape = "rect" coords = "002,111,075,143" href = "Config-M3.html" />
        <area shape = "rect" coords = "002,147,075,180" href = "Config-M4.html" />
            
        <area shape = "rect" coords = "376,038,450,070" href = "Config-Limits.html" />
        <area shape = "rect" coords = "376,074,450,106" href = "Config-Returns.html" />
        <area shape = "rect" coords = "376,112,450,143" href = "Config-More.html" />                     
        <area shape = "rect" coords = "376,217,450,252" href = "Config-More-LoadIni.html" />                     

        <area shape = "rect" coords = "375,001,446,033" href = "javascript:history.back()" />
    </map>
</div>

<!-- ################################################### -->
<!-- Body - Left Side of the Screen                      -->
<!-- ################################################### -->

<table align="Center" border="0">
    <tr height="35px">
        <td align="Center" bgcolor="#3980C0" width="300px">
            <font color="White" size="4"><b>Preferences Screen</b></font>
        </td>
    </tr>
</table>

<p><div style="float: right; width: 200px; margin: 5px 5px 5px 5px; padding: 5px; border: 1px solid black; text-align: left; background-color:#3980C0">
    <font color="White" size="2">Touch the buttons on the screen image to the right to see the details for the that screen.</font>
</div>

<b>Purpose:</b>  The factors on these screens control how speeds and distances are determined.
        
<p>Also, the M3 axis can be configured as either a radial axis (e.g., when used for a spherical apparatus or a spindle), or a linear axis.  When configured as a radial axis for a spherical device it uses a calculated distance along the circumference based on the radius length between the spherical device pivot point and the cutter. The M3 Radius text box will appear on a page when the M3 axis is active and the M3 axis is set to Radial.
        
<p>On the relevant pages, the controls for this axis will be set as appropriate for the axis' configuration.  For example,
        
<table align="center" border=1>
    <tr bgcolor="LightGray">
        <td align="center">
            <b>When Set To</b>
        </td>
        <td width=250px align="Center">
            <b>Buttons Displayed</b>
        </td>
    </tr>
    
    <tr>
        <td align="center">
            <b>Radial</b>
        </td>
        <td align="Center" valign="Middle">
            <img src="Images/Buttons/ButtonGreen-CCW.jpg" width="50px">
            <img src="Images/Buttons/ButtonGreen-Stop.jpg" width="50px">
            <img src="Images/Buttons/ButtonGreen-Return.jpg" width="50px">
            <img src="Images/Buttons/ButtonGreen-CW.jpg" width="50px">
        </td>
    </tr>
    
    <tr>
        <td align="center">
            <b>Axial</b>
        </td>
        <td align="Center" valign="Middle">
            <img src="Images/Buttons/ButtonSync-Left.png" width="50px">
            <img src="Images/Buttons/ButtonSync-Stop.png" width="50px">
            <img src="Images/Buttons/ButtonSync-Return.png" width="50px">
            <img src="Images/Buttons/ButtonSync-Right.png" width="50px">
        </td>
    </tr>
</table>
        
    <ul>
        <li style="margin-bottom: 12px;">The values shown in a <span style="background-color: #FFEE9C">&nbsp;tan box&nbsp;</span> show values on the Nextion.  Touching one of the text boxes allows you to edit that value using the <a href="NumberPad.html">Number Pad</a> screen.</li>

        <li>The values shown in a <span style="background-color: LightGray">&nbsp;gray box&nbsp;</span>  show the ones stored on the Teensy controller.  These are read only and should match the settings on the Nextion.</li>
    </ul>

<table width="100%">
    <col width="125px">
    <col width="*">

<!-- ################################################### -->
<!-- Variables   -->
    <tr>
        <td colspan=999>
            <hr class="style2">
        </td>
    </tr>

    <tr valign="top">
        <td>
            <span style="background-color: #FFEE9C"><b>&nbsp;Microsteps&nbsp;</b></span>
        </td>
        <td>
            <p style="margin-top: 0;">This must use valid values for the stepper driver, and is usually 1, 2, 4, 16, 32, 64, or 128.  These settings must match the jumper settings on the PCB.

            <p style="margin-bottom: 0;"><span style="background-color: #FFEE9C"><b>&nbsp; 32 &nbsp;</b></span>
                    is the designed value for the MDF Rose Engine Lathe 2.0.
        </td>
    </tr>

    <tr>
        <td colspan=999>
            &nbsp;
        </td>
    </tr>

    <tr valign="top">
        <td>
            <span style="background-color: #FFEE9C"><b>&nbsp;Steps/360&nbsp;</b></span>
        </td>
        <td>
            <p style="margin-top: 0;">This must use valid values for the stepper motor.  The typical step angle is 1.8&deg;, so this would be

\[
\frac{360 &deg;}{1.8 &deg;} = 200
\]

            <span style="background-color: #FFEE9C"><b>&nbsp; 200 &nbsp;</b></span> is the designed value for the MDF Rose Engine Lathe 2.0.
        </td>
    </tr>

    <tr>
        <td colspan=999>
                &nbsp;
        </td>
    </tr>

    <tr valign="top">
        <td>
            <span style="background-color: #FFEE9C"><b>&nbsp;Distance/360&nbsp;</b></span>
        </td>
        <td>
            <p style="margin-top: 0;">This is the distance the carriage moves in one revolution of its stepper motor. It is a value which can arrived at two ways:
                <ol>
                    <li>Empirically by measuring the movement along the selected axis while the stepper motor revolves a set number of turns.  This can be accomplished by entering a value in <b>Distance/360</b> such as 1, then using the <a href="Mov.html">Move Screen</a> to move a Distance of 20 while measuring.  This should turn the motor through 20 full revolutions.  Divide the distance traveled by 20 and enter calculated value into <b>Distance/360</b>.  If the total distance moved in 20 revolutions is insignificant, use a larger <i>Distance</i> number like 50 (or even 100).
                            
                    <p>Note that best practice is to remove backlash from the axis' mechanism prior to the measurement run by moving the axis in the same direction.  It may be possible to get a starting point for Distance/360 by calculation calculating the stepper pulley to driven pulley ratio, and/or the thread pitch.</li>
                            
                            
                    <div style="float: right; width: 300px;">
                        <form id="frm1">
                        <table style="border-collapse: collapse; 
                                width: 100%; ">
                            <col width="75px">
            	        	<col width="*">
                	        <col width="75px">
            	            <col width="35px">

                            <tr style="background-color: Moccasin;
                                    vertical-align: bottom;
                                    ">
                                <td colspan="4" style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: medium;
                                        border-bottom-width: thin;
                                        border-left-width: medium;
                                        border-right-width: medium;
                                        text-align: center;
                                        ">
				                    <font color="blue" size="4"><b>Distance/360 Calculator</b></font>
                		        </td>
 	       		            </tr>

                            <tr style="background-color: White;
                                    vertical-align: middle;
                                    ">
                                <td rowspan=4 style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: medium;
                                        border-right-width: 0px;
                                        text-align: left;
                                        ">
				                    Lead Screw
            			        </td>
                                <td rowspan=2 style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: thin;
                                        border-right-width: 0px;
                                        text-align: left;
                                        ">
				                    Pitch
                    			</td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
                                    <input
                                        type="number"
                                        style="font-size:14px; text-align: right; width: 65px; background-color:#FFEE9C" 
             					        name="MetricPitch" 
        	            				step='0.1' 
		                    			placeholder='0.0' 
 			               				value=2.0
        		             			/>
                                </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: 0px;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
 	              			        mm
 			                   </td>
 			       	        </tr>
                            <tr style="background-color: White;
                                    vertical-align: middle;
                                    ">
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: 0px;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
                                    <p id="ImpPitch" style="margin: 0px; padding: 0px;"></p>
 				                </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: 0px;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
 	              			        in
 			               	     </td>
 			       	         </tr>

                            <tr style="background-color: White;
                                    vertical-align: middle;
                                    ">
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: left;
                                        ">
                                    TPI
                		        </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
                                    <p id="ScrewTPI" style="margin: 0px; padding: 0px;"></p>
                    			</td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: 0px;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
                        		</td>
	                	   	</tr>
	                	   	
                            <tr style="background-color: White;
                                    vertical-align: middle;
                                    ">
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: left;
                                        ">
				        	        Starts
                		        </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
                                    <input 
	                 	       			type="number"
     		             		   		style="font-size:14px; text-align: right; width: 65px; background-color:#FFEE9C" 
         	       				    	name="LSStarts" 
		        	    			    step='1' 
				           			    placeholder='0' 
 					   	       	        value=4
        					            />
                    			</td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: 0px;
                                        border-bottom-width: thin;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
                        		</td>
	                	   	</tr>


                            <tr style="background-color: #E0E6F8;
                                    vertical-align: middle;
                                    ">
                                <td colspan=2 rowspan=2 style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: medium;
                                        border-left-width: medium;
                                        border-right-width: 0px;
                                        text-align: left;
                                        ">
		    	                    Distance/360
                		        </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: 0px;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
   			 		                <p id="MetricDist360" style="margin: 0px; padding: 0px;"></p>
                		        </td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: thin;
                                        border-bottom-width: 0px;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
			                        mm
                        		</td>
	                	   	</tr>
                            <tr style="background-color: #E0E6F8;
                                    vertical-align: middle;
                                    ">
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: 0px;
                                        border-bottom-width: medium;
                                        border-left-width: 0px;
                                        border-right-width: 0px;
                                        text-align: right;
                                        ">
   			 		                <p id="ImpDist360" style="margin: 0px; padding: 0px;"></p>
                    			</td>
                                <td style="
                                        border-style: solid;
                                        border-color: black;
                                        border-top-width: 0px;
                                        border-bottom-width: medium;
                                        border-left-width: 0px;
                                        border-right-width: medium;
                                        text-align: left;
                                        ">
			                        in
                		        </td>
	                        </tr>
                		</table>
                	</form>

                    <p><center>
    	                <button type="button" onclick="calcValues()" style="font-size:18px; background-color: #0404B4; color: white;">Calculate Distance/360</button>
                    </center>
                </div>
                        	
                            <li>Alternatively, it can be calculated using the lead screw's information (if known).  If you built your cross slide using a lead screw with metric threads (e.g., as is typically used for 3D printers), common values are 2 mm pitch and 4 starts.  The calculator below can make the <b>Distance/360</b> calculation easier.</li>
                        </ol>
                                
            <p>Finally, it is important to note that if you use different apparatuses (such as a cross-slide, or a spherical or a curvilinear apparatus) with this axis, each will likely have a different value for Distance/360.  It is a good idea to label each apparatus.  
                    
            <p>An example is below:

            <table style="border-collapse: collapse; margin: auto;">
                <tr style="background-color: White;
                        vertical-align: middle;
                        ">
                    <td style="width: 150px;
                            border-style: solid;
                            border-color: lightgray;
                            border-top-width: thin;
                            border-bottom-width: thin;
                            border-left-width: thin;
                            border-right-width: thin;
                            text-align: center;
                            ">
                        <b>Distance/360</b>
                        <br>
                        <b>0.31496&quot; / 8mm</b>
                    </td>
                </tr>
            </table>
                    
        </td>
    </tr>
            
<!-- ################################################### -->
<!-- Controls   -->

    <tr>
        <td colspan=999>
            <hr class="style1">
        </td>
    </tr>

    <tr valign="top">
        <td>
            <b>Polarity</b>
        </td>
        <td>
            <p style="margin-top: 0;">The <b>Polarity</b> High and Low radio buttons for both Spindle and Z Axis are set as:

            <table>
                <tr valign="top">
                    <td>
                        <b>High</b>
                    </td>
                    <td width="25px">
                        <img src="Images/CircleUnChecked.png" width="20px" height="20px">
                    </td>
                    <td>
                        High setting is for use with some external stepper drivers
                
                        <br><br>
                    </td>
                </tr>
                <tr valign="top">
                    <td>
                        <b>Low</b>
                    </td>
                    <td width="25px">
                        <img src="Images/CircleChecked.png" width="20px" height="20px">
                    </td>
                    <td>
                        Low is the default, which is the correct setting when using the StepperOnline DM542T and the Pololu DRV8825 Stepper Drivers.
                        
                        <br><br>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

    <tr valign="top">
        <td>
            <b>Leadscrew</b>
        </td>
        <td>
            <b>Leadscrew</b> should be set to the thread direction of the axis leadscrew.
    
            <br><br>

            <table>
                <tr valign="top">
                    <td width="90px">
                        <b>Left Hand</b>
                    </td>
                    <td width="25px">
                        <img src="Images/CircleUnChecked.png" width="20px" height="20px">
                    </td>
                    <td>
                        Use when using an apparatus with a left-handed threaded rod.  A Hardinge compound slide-rest has a left-hand thread.
                        
                        <br><br>
                    </td>
                </tr>
                <tr valign="top">
                    <td>
                        <b>Right Hand</b>
                    </td>
                    <td width="25px">
                        <img src="Images/CircleChecked.png" width="20px" height="20px">
                    </td>
                    <td>
                        Use when using an apparatus with a right-handed threaded rod.  This is the most common options when using 3D printer leadscrews.
                
                        <br><br>
                    </td>
                </tr>
            </table>
    </tr>
</table>

<!-- ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★  -->
<!-- Starred Point -->

<table width="100%" border=0>
    <tr valign="top">
        <td width="25px">
            &nbsp;
        </td>

        <td width="*">
            <div style="float: left; width: 30px; margin: 5px 5px 5px 5px; padding: 5px; border: 0px solid DarkGray; text-align: center;">
                <font color="red" size=6><b>&starf;</b></font>
            </div>
                    
            <p><font color="Red" >Strongly recommend you take care when changing these.</font>
        </td>

        <td width="25px">
            &nbsp;
        </td>
    </tr>
</table>

</div>

<!-- ################################################### -->
<!-- Footer                                              -->
<!-- ################################################### -->
<div w3-include-html="include-Footer.html"></div> 
<script>
includeHTML();
</script> 
</body>
</html>
