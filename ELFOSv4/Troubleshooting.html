<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html>

<head bgcolor=#E6E6E6>
<title>ELFOS</title>
<link rel="shortcut icon" type="image/ico" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="Images/favicon.png">

<body style="background-color: #E6E6E6; font: 16px Arial; ">

<!-- ################################################### -->
<!-- Code for Including Standard HTML files on the 	 -->
<!-- server					         -->
<!-- ################################################### -->
<script src="library.js"></script>

<script>
function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /* Loop through a collection of all HTML elements: */
  z = document.getElementsByTagName("*");
  for (i = 0; i < z.length; i++) {
    elmnt = z[i];
    /*search for elements with a certain atrribute:*/
    file = elmnt.getAttribute("w3-include-html");
    if (file) {
      /* Make an HTTP request using the attribute value as the file name: */
      xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
          if (this.status == 200) {elmnt.innerHTML = this.responseText;}
          if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
          /* Remove the attribute, and call this function once more: */
          elmnt.removeAttribute("w3-include-html");
          includeHTML();
        }
      }
      xhttp.open("GET", file, true);
      xhttp.send();
      /* Exit the function: */
      return;
    }
  }
}
</script> 

<!-- ################################################### -->
<!-- Site Standards Include File        		  		 -->
<div w3-include-html="include-SiteStandards.html"></div> 
<script>
includeHTML();
</script>

<!-- ################################################### -->
<!-- Body                                                -->
<!-- ################################################### -->

<body bgcolor=#E6E6E6 background="Images/DevBackground.png">
<font face="Georgia">

<p>Common issues are noted below, along with recommended actions to take.


<h2><font color="DarkBlue" size="5"><b>Indexing does not work</b></font></h2>

<p>Check that the amount to be indexed is set properly into the Teensy.  Tap the 
<img src="Images/Buttons/ButtonGrayGreen-Config.jpg" width="50px" />
 button and ensure the Nextion and Teensy values are the same.

<p>In the example below, you can see on the left the screen that the user is trying to use a fixed setting of 36&deg; per index, and saving that value in index memory #1.  When the <img src="Images/Buttons/ButtonGrayGreen-Config.jpg" width="50px" /> button was tapped, it shows the EEPROM settings shown in the screen sample to the right.  

<table width="100%">
    <tr>
        <td align="center">
            <img src="Images/Index_Mismatch.jpg" width="450px" />
        </td>
        <td align="center">
            <img src="Images/EEPROM_Mismatch.jpg" width="450px" />
        </td>
    </tr>
</table>

<p>Notice how the Index ID (the memory #) is different, as are the degrees, and even that it is running Fixed (vs. File).  Any of these 3 would make it not run correctly.

<p>This is quite common when using a memory # / Index ID which you've not used before.

<h3>What to do</h3>
<p>To fix it, for each setting, select another option, then re-select the one you want.  So, tap the Back button on the EEPROM screen to return to the screen on the left.  In the case noted above, the user needs to,
    <ol>
        <li>Select a different memory # (Index ID), then re-select #1.</li>
        <li>Select File, then Fixed.</li>
        <li>Select the Degrees, delete the current value, and then re-enter 36.  (For instructions on the NumberPad screen, check <a href="NumberPad.html">this link</a>.</li>
    </ol>

<p>Don't assume this fixes everything.  Check the EEPROM settings again to be sure.

<h3>Why this can happen</h3>
<p>First, let me review the two pieces of this puzzle.
    <ul>
        <li><b>Nextion</b> - This is the display, and will be showing a value on the screen.  Those values may not have been written down to the Teensy -- they may be relics of when the system was loaded or updated.</li>

        <br>
        <li><b>Teensy</b> - The Teensy is the controller which performs the calculations and directs the movement(s).  If the value in the Teensy does not match what is shown on the Nextion, then the function won't work as expected.  (In the case above, when the indexing did not "work", it was working as the Teensy was set to run -- 0&deg; per index!</li>
    </ul>

<p>When the system is initially loaded, not all values are setup in the Teensy.  This can happen for a myriad of reasons, but one of the classic ones is that your INI file is not setup correctly.  Or it could simply be that the value was just hosed up.

<p>In any regard, if you try to use a function which depends on those settings, it won't work correctly.  Checking the EEPROM settings is a good first practice for whenever things don't work seem correctly.


<!-- ################################################### -->
<!-- Footer                                              -->
<!-- ################################################### -->
<div w3-include-html="include-Footer.html"></div> 
<script>
includeHTML();
</script> 
</body>
</html>
